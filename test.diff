diff --git a/addons/channellist/classes/class.channellist.inc.php b/addons/channellist/classes/class.channellist.inc.php
index 09639b3..f52d095 100644
--- a/addons/channellist/classes/class.channellist.inc.php
+++ b/addons/channellist/classes/class.channellist.inc.php
@@ -443,16 +443,6 @@ class cjoChannelList {
         }
         return $content;
     }
-
-    private static function getDescription() {
-        $description = str_replace('<',' <',self::$current['description']);
-        $description = str_replace(array("\r\n","\r","\n"), ' ', $description);
-        $description = preg_replace('/ +/',' ', $description);
-        $description = strip_tags($description);
-        $description = substr($description, 0 , 157);
-        return $description.'...';
-    }
-
     
     public static function replaceVars($params) {
 
@@ -468,11 +458,9 @@ class cjoChannelList {
     		$replace['VF_CHANNEL_TITLE[]'] = self::getChannelTitle();
     		$replace['VF_CHANNEL_TEXT[]'] = self::getChannelText();
     		$replace['VF_CHANNEL_GALLERY[]'] = self::getChannelGallery();
-            $replace['VF_CHANNEL_URL[]'] = self::$current['url'];
-            $replace['VF_CHANNEL_DESCRIPTION[]'] = self::getDescription();
     		
     	    $search = array_keys($replace);
-        	$content = str_replace($search, $replace, $content);    
+        	$content = str_replace($search, $replace, $content);       	
     	}
 
     	return $content;
diff --git a/addons/community/classes/class.cm_groupletter.inc.php b/addons/community/classes/class.cm_groupletter.inc.php
index 8a71aac..c616ad9 100644
--- a/addons/community/classes/class.cm_groupletter.inc.php
+++ b/addons/community/classes/class.cm_groupletter.inc.php
@@ -610,7 +610,7 @@ class cjoGroupLetter {
             $text .= $line;
         }
 
-        $this->html = wordwrap( $html, 240, "\r\n" );
+        $this->html = $html;
         $this->text = $text;
         $this->embedImages();
     }
diff --git a/addons/community/pages/index.inc.php b/addons/community/pages/index.inc.php
index d608067..f2a17fb 100644
--- a/addons/community/pages/index.inc.php
+++ b/addons/community/pages/index.inc.php
@@ -29,9 +29,9 @@ $function  = cjo_request('function', 'string');
 $group_id  = cjo_request('group_id', 'int', 0);
 
 $subpages = new cjoSubPages($subpage, $mypage);
-$subpages->addPage( array('groupletter', 'title' => $I18N_10->msg('subtitle_groupletter')));
 $subpages->addPage( array('user', 'title' => $I18N_10->msg('subtitle_user'), 'query_str' => 'page=community&subpage=user&clang='.$clang.'&group_id='.$group_id));
 $subpages->addPage( array('groups', 'title' => $I18N_10->msg('subtitle_groups'), 'query_str' => 'page=community&subpage=groups&clang='.$clang.'&group_id='.$group_id));
+$subpages->addPage( array('groupletter', 'title' => $I18N_10->msg('subtitle_groupletter')));
 $subpages->addPage( array('archiv', 'title' => $I18N_10->msg('subtitle_archiv')));
 $subpages->addPage( array('imexport', 'title' => $I18N_10->msg('import_export')));
 $subpages->addPage( array('settings', 'title' => $I18N_10->msg('subtitle_settings')));
diff --git a/addons/jquery/jquery/fancybox/fancybox.js b/addons/jquery/jquery/fancybox/fancybox.js
index fbcf9de..7ba30d8 100644
--- a/addons/jquery/jquery/fancybox/fancybox.js
+++ b/addons/jquery/jquery/fancybox/fancybox.js
@@ -14,7 +14,7 @@
  *   http://www.opensource.org/licenses/mit-license.php
  *   http://www.gnu.org/licenses/gpl.html
  */
-;(function(b){var m,t,u,f,D,j,E,n,z,A,q=0,e={},o=[],p=0,d={},l=[],G=null,v=new Image,J=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,W=/[^\.]\.(swf)\s*$/i,K,L=1,y=0,s="",r,i,h=false,B=b.extend(b("<div/>")[0],{prop:0}),M=b.browser.msie&&b.browser.version<7&&!window.XMLHttpRequest,N=function(){t.hide();v.onerror=v.onload=null;G&&G.abort();m.empty()},O=function(){if(false===e.onError(o,q,e)){t.hide();h=false}else{e.titleShow=false;e.width="auto";e.height="auto";m.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');F()}},I=function(){var a=o[q],c,g,k,C,P,w;N();e=b.extend({},b.fn.fancybox.defaults,typeof b(a).data("fancybox")=="undefined"?e:b(a).data("fancybox"));w=e.onStart(o,q,e);if(w===false){h=false}else{if(typeof w=="object"){e=b.extend(e,w)}k=e.title||(a.nodeName?b(a).attr("title"):a.title)||"";if(a.nodeName&&!e.orig){e.orig=b(a).children("img:first").length?b(a).children("img:first"):b(a)}if(k===""&&e.orig&&e.titleFromAlt){k=e.orig.attr("alt")}c=e.href||(a.nodeName?b(a).attr("href"):a.href)||null;if(/^(?:javascript)/i.test(c)||c=="#"){c=null}if(e.type){g=e.type;if(!c){c=e.content}}else{if(e.content){g="html"}else{if(c){g=c.match(J)?"image":c.match(W)?"swf":b(a).hasClass("iframe")?"iframe":c.indexOf("#")===0?"inline":"ajax"}}}if(g){if(g=="inline"){a=c.substr(c.indexOf("#"));g=b(a).length>0?"inline":"ajax"}e.type=g;e.href=c;e.title=k;if(e.autoDimensions){if(e.type=="html"||e.type=="inline"||e.type=="ajax"){e.width="auto";e.height="auto"}else{e.autoDimensions=false}}if(e.modal){e.overlayShow=true;e.hideOnOverlayClick=false;e.hideOnContentClick=false;e.enableEscapeButton=false;e.showCloseButton=false}e.padding=parseInt(e.padding,10);e.margin=parseInt(e.margin,10);m.css("padding",e.padding+e.margin);b(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){b(this).replaceWith(j.children())});switch(g){case"html":m.html(e.content);F();break;case"inline":if(b(a).parent().is("#fancybox-content")===true){h=false;break}b('<div class="fancybox-inline-tmp" />').hide().insertBefore(b(a)).bind("fancybox-cleanup",function(){b(this).replaceWith(j.children())}).bind("fancybox-cancel",function(){b(this).replaceWith(m.children())});b(a).appendTo(m);F();break;case"image":h=false;if(typeof mobile!="undefined"&&mobile===true&&typeof _PhotoSwipe!="undefined"){var items=[];$.each(o,function(i,value){ if (value.href.match(/\.(jpeg|jpg|gif|png)$/) != null) { items.push({url:value.href,caption:(d.titleShow)?value.title:null});}});var options={getImageSource:function(obj){console.log(obj.url);return obj.url},getImageCaption:function(obj){return obj.caption},preventSlideshow:!(items.length>1),previousDisabled:!(items.length>1),nextDisabled:!(items.length>1),loop:true,slideSpeed:250,nextPreviousSlideSpeed:250,enableDrag:true,swipeThreshold:50,swipeTimeThreshold:250,slideTimingFunction:"ease-out",slideshowDelay:3000,doubleTapSpeed:250,margin:20,imageScaleMethod:"fitNoUpscale",captionAndToolbarFlipPosition:true};instance=_PhotoSwipe.attach(items,options);instance.show(0);return}b.fancybox.showActivity();v=new Image;v.onerror=function(){O()};v.onload=function(){h=true;v.onerror=v.onload=null;e.width=v.width;e.height=v.height;b("<img />").attr({id:"fancybox-img",src:v.src,alt:e.title}).appendTo(m);Q()};v.src=c;break;case"swf":e.scrolling="no";C='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+e.width+'" height="'+e.height+'"><param name="movie" value="'+c+'"></param>';P="";b.each(e.swf,function(x,H){C+='<param name="'+x+'" value="'+H+'"></param>';P+=" "+x+'="'+H+'"'});C+='<embed src="'+c+'" type="application/x-shockwave-flash" width="'+e.width+'" height="'+e.height+'"'+P+"></embed></object>";m.html(C);F();break;case"ajax":h=false;b.fancybox.showActivity();e.ajax.win=e.ajax.success;G=b.ajax(b.extend({},e.ajax,{url:c,data:e.ajax.data||{},error:function(x){x.status>0&&O()},success:function(x,H,R){if((typeof R=="object"?R:G).status==200){if(typeof e.ajax.win=="function"){w=e.ajax.win(c,x,H,R);if(w===false){t.hide();return}else{if(typeof w=="string"||typeof w=="object"){x=w}}}m.html(x);F()}}}));break;case"iframe":if(typeof mobile!="undefined"&&mobile===true){window.open(e.href,"fancybox").focus();h=false;return}else{Q()}}}else{O()}}},F=function(){var a=e.width,c=e.height;a=a.toString().indexOf("%")>-1?parseInt((b(window).width()-e.margin*2)*parseFloat(a)/100,10)+"px":a=="auto"?"auto":a+"px";c=c.toString().indexOf("%")>-1?parseInt((b(window).height()-e.margin*2)*parseFloat(c)/100,10)+"px":c=="auto"?"auto":c+"px";m.wrapInner('<div style="width:'+a+";height:"+c+";overflow: "+(e.scrolling=="auto"?"auto":e.scrolling=="yes"?"scroll":"hidden")+';position:relative;"></div>');e.width=m.width();e.height=m.height();Q()},Q=function(){var a,c;t.hide();if(f.is(":visible")&&false===d.onCleanup(l,p,d)){b.event.trigger("fancybox-cancel");h=false}else{h=true;b(j.add(u)).unbind();b(window).unbind("resize.fb scroll.fb");b(document).unbind("keydown.fb");f.is(":visible")&&d.titlePosition!=="outside"&&f.css("height",f.height());l=o;p=q;d=e;if(d.overlayShow){u.css({"background-color":d.overlayColor,opacity:d.overlayOpacity,cursor:d.hideOnOverlayClick?"pointer":"auto",height:b(document).height()});if(!u.is(":visible")){M&&b("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"});u.show()}}else{u.hide()}i=X();s=d.title||"";y=0;n.empty().removeAttr("style").removeClass();if(d.titleShow!==false){if(b.isFunction(d.titleFormat)){a=d.titleFormat(s,l,p,d)}else{a=s&&s.length?d.titlePosition=="float"?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+s+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+d.titlePosition+'">'+s+"</div>":false}s=a;if(!(!s||s==="")){n.addClass("fancybox-title-"+d.titlePosition).html(s).appendTo("body").show();switch(d.titlePosition){case"inside":n.css({width:i.width-d.padding*2,marginLeft:d.padding,marginRight:d.padding});y=n.outerHeight(true);n.appendTo(D);i.height+=y;break;case"over":n.css({marginLeft:d.padding,width:i.width-d.padding*2,bottom:d.padding}).appendTo(D);break;case"float":n.css("left",parseInt((n.width()-i.width-40)/2,10)*-1).appendTo(f);break;default:n.css({width:i.width-d.padding*2,paddingLeft:d.padding,paddingRight:d.padding}).appendTo(f)}}}n.hide();if(f.is(":visible")){b(E.add(z).add(A)).hide();a=f.position();r={top:a.top,left:a.left,width:f.width(),height:f.height()};c=r.width==i.width&&r.height==i.height;j.fadeTo(d.changeFade,0.3,function(){var g=function(){j.html(m.contents()).fadeTo(d.changeFade,1,S)};b.event.trigger("fancybox-change");j.empty().removeAttr("filter").css({"border-width":d.padding,width:i.width-d.padding*2,height:e.autoDimensions?"auto":i.height-y-d.padding*2});if(c){g()}else{B.prop=0;b(B).animate({prop:1},{duration:d.changeSpeed,easing:d.easingChange,step:T,complete:g})}})}else{f.removeAttr("style");j.css("border-width",d.padding);if(d.transitionIn=="elastic"){r=V();j.html(m.contents());f.show();if(d.opacity){i.opacity=0}B.prop=0;b(B).animate({prop:1},{duration:d.speedIn,easing:d.easingIn,step:T,complete:S})}else{d.titlePosition=="inside"&&y>0&&n.show();j.css({width:i.width-d.padding*2,height:e.autoDimensions?"auto":i.height-y-d.padding*2}).html(m.contents());f.css(i).fadeIn(d.transitionIn=="none"?0:d.speedIn,S)}}}},Y=function(){if(d.enableEscapeButton||d.enableKeyboardNav){b(document).bind("keydown.fb",function(a){if(a.keyCode==27&&d.enableEscapeButton){a.preventDefault();b.fancybox.close()}else{if((a.keyCode==37||a.keyCode==39)&&d.enableKeyboardNav&&a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&a.target.tagName!=="SELECT"){a.preventDefault();b.fancybox[a.keyCode==37?"prev":"next"]()}}})}if(d.showNavArrows){if(d.cyclic&&l.length>1||p!==0){z.show()}if(d.cyclic&&l.length>1||p!=l.length-1){A.show()}}else{z.hide();A.hide()}},S=function(){if(!b.support.opacity){j.get(0).style.removeAttribute("filter");f.get(0).style.removeAttribute("filter")}e.autoDimensions&&j.css("height","auto");f.css("height","auto");s&&s.length&&n.show();d.showCloseButton&&E.show();Y();d.hideOnContentClick&&j.bind("click",b.fancybox.close);d.hideOnOverlayClick&&u.bind("click",b.fancybox.close);b(window).bind("resize.fb",b.fancybox.resize);d.centerOnScroll&&b(window).bind("scroll.fb",b.fancybox.center);if(d.type=="iframe"){b('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(b.browser.msie?'allowtransparency="true""':"")+' scrolling="'+e.scrolling+'" src="'+d.href+'"></iframe>').appendTo(j)}f.show();h=false;b.fancybox.center();d.onComplete(l,p,d);var a,c;if(l.length-1>p){a=l[p+1].href;if(typeof a!=="undefined"&&a.match(J)){c=new Image;c.src=a}}if(p>0){a=l[p-1].href;if(typeof a!=="undefined"&&a.match(J)){c=new Image;c.src=a}}},T=function(a){var c={width:parseInt(r.width+(i.width-r.width)*a,10),height:parseInt(r.height+(i.height-r.height)*a,10),top:parseInt(r.top+(i.top-r.top)*a,10),left:parseInt(r.left+(i.left-r.left)*a,10)};if(typeof i.opacity!=="undefined"){c.opacity=a<0.5?0.5:a}f.css(c);j.css({width:c.width-d.padding*2,height:c.height-y*a-d.padding*2})},U=function(){return[b(window).width()-d.margin*2,b(window).height()-d.margin*2,b(document).scrollLeft()+d.margin,b(document).scrollTop()+d.margin]},X=function(){var a=U(),c={},g=d.autoScale,k=d.padding*2;c.width=d.width.toString().indexOf("%")>-1?parseInt(a[0]*parseFloat(d.width)/100,10):d.width+k;c.height=d.height.toString().indexOf("%")>-1?parseInt(a[1]*parseFloat(d.height)/100,10):d.height+k;if(g&&(c.width>a[0]||c.height>a[1])){if(e.type=="image"||e.type=="swf"){g=d.width/d.height;if(c.width>a[0]){c.width=a[0];c.height=parseInt((c.width-k)/g+k,10)}if(c.height>a[1]){c.height=a[1];c.width=parseInt((c.height-k)*g+k,10)}}else{c.width=Math.min(c.width,a[0]);c.height=Math.min(c.height,a[1])}}c.top=parseInt(Math.max(a[3]-20,a[3]+(a[1]-c.height-40)*0.5),10);c.left=parseInt(Math.max(a[2]-20,a[2]+(a[0]-c.width-40)*0.5),10);return c},V=function(){var a=e.orig?b(e.orig):false,c={};if(a&&a.length){c=a.offset();c.top+=parseInt(a.css("paddingTop"),10)||0;c.left+=parseInt(a.css("paddingLeft"),10)||0;c.top+=parseInt(a.css("border-top-width"),10)||0;c.left+=parseInt(a.css("border-left-width"),10)||0;c.width=a.width();c.height=a.height();c={width:c.width+d.padding*2,height:c.height+d.padding*2,top:c.top-d.padding-20,left:c.left-d.padding-20}}else{a=U();c={width:d.padding*2,height:d.padding*2,top:parseInt(a[3]+a[1]*0.5,10),left:parseInt(a[2]+a[0]*0.5,10)}}return c},Z=function(){if(t.is(":visible")){b("div",t).css("top",L*-40+"px");L=(L+1)%12}else{clearInterval(K)}};b.fn.fancybox=function(a){if(!b(this).length){return this}b(this).data("fancybox",b.extend({},a,b.metadata?b(this).metadata():{})).unbind("click.fb").bind("click.fb",function(c){c.preventDefault();if(!h){h=true;b(this).blur();o=[];q=0;c=b(this).attr("rel")||"";if(!c||c==""||c==="nofollow"){o.push(this)}else{o=b("a[rel="+c+"], area[rel="+c+"]");q=o.index(this)}I()}});return this};b.fancybox=function(a,c){var g;if(!h){h=true;g=typeof c!=="undefined"?c:{};o=[];q=parseInt(g.index,10)||0;if(b.isArray(a)){for(var k=0,C=a.length;k<C;k++){if(typeof a[k]=="object"){b(a[k]).data("fancybox",b.extend({},g,a[k]))}else{a[k]=b({}).data("fancybox",b.extend({content:a[k]},g))}}o=jQuery.merge(o,a)}else{if(typeof a=="object"){b(a).data("fancybox",b.extend({},g,a))}else{a=b({}).data("fancybox",b.extend({content:a},g))}o.push(a)}if(q>o.length||q<0){q=0}I()}};b.fancybox.showActivity=function(){clearInterval(K);t.show();K=setInterval(Z,66)};b.fancybox.hideActivity=function(){t.hide()};b.fancybox.next=function(){return b.fancybox.pos(p+1)};b.fancybox.prev=function(){return b.fancybox.pos(p-1)};b.fancybox.pos=function(a){if(!h){a=parseInt(a);o=l;if(a>-1&&a<l.length){q=a;I()}else{if(d.cyclic&&l.length>1){q=a>=l.length?0:l.length-1;I()}}}};b.fancybox.cancel=function(){if(!h){h=true;b.event.trigger("fancybox-cancel");N();e.onCancel(o,q,e);h=false}};b.fancybox.close=function(){if(window.name=='fancybox'){window.self.close();}function a(){u.fadeOut("fast");n.empty().hide();f.hide();b.event.trigger("fancybox-cleanup");j.empty();d.onClosed(l,p,d);l=e=[];p=q=0;d=e={};h=false}if(!(h||f.is(":hidden"))){h=true;if(d&&false===d.onCleanup(l,p,d)){h=false}else{N();b(E.add(z).add(A)).hide();b(j.add(u)).unbind();b(window).unbind("resize.fb scroll.fb");b(document).unbind("keydown.fb");j.find("iframe").attr("src",M&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank");d.titlePosition!=="inside"&&n.empty();f.stop();if(d.transitionOut=="elastic"){r=V();var c=f.position();i={top:c.top,left:c.left,width:f.width(),height:f.height()};if(d.opacity){i.opacity=1}n.empty().hide();B.prop=1;b(B).animate({prop:0},{duration:d.speedOut,easing:d.easingOut,step:T,complete:a})}else{f.fadeOut(d.transitionOut=="none"?0:d.speedOut,a)}}}};b.fancybox.resize=function(){u.is(":visible")&&u.css("height",b(document).height());b.fancybox.center(true)};b.fancybox.center=function(a){var c,g;if(!h){g=a===true?1:0;c=U();!g&&(f.width()>c[0]||f.height()>c[1])||f.stop().animate({top:parseInt(Math.max(c[3]-20,c[3]+(c[1]-j.height()-40)*0.5-d.padding)),left:parseInt(Math.max(c[2]-20,c[2]+(c[0]-j.width()-40)*0.5-d.padding))},typeof a=="number"?a:200)}};b.fancybox.init=function(){if(!b("#fancybox-wrap").length){b("body").append(m=b('<div id="fancybox-tmp"></div>'),t=b('<div id="fancybox-loading"><div></div></div>'),u=b('<div id="fancybox-overlay"></div>'),f=b('<div id="fancybox-wrap"></div>'));D=b('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(f);D.append(j=b('<div id="fancybox-content"></div>'),E=b('<a id="fancybox-close"></a>'),n=b('<div id="fancybox-title"></div>'),z=b('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),A=b('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));E.click(b.fancybox.close);t.click(b.fancybox.cancel);z.click(function(a){a.preventDefault();b.fancybox.prev()});A.click(function(a){a.preventDefault();b.fancybox.next()});b.fn.mousewheel&&f.bind("mousewheel.fb",function(a,c){if(h){a.preventDefault()}else{if(b(a.target).get(0).clientHeight==0||b(a.target).get(0).scrollHeight===b(a.target).get(0).clientHeight){a.preventDefault();b.fancybox[c>0?"prev":"next"]()}}});b.support.opacity||f.addClass("fancybox-ie");if(M){t.addClass("fancybox-ie6");f.addClass("fancybox-ie6");b('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(D)}}};b.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.7,overlayColor:"#000",titleShow:true,titlePosition:"float",titleFormat:null,titleFromAlt:false,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};b(document).ready(function(){b.fancybox.init()})})(jQuery);
+;(function(b){var m,t,u,f,D,j,E,n,z,A,q=0,e={},o=[],p=0,d={},l=[],G=null,v=new Image,J=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,W=/[^\.]\.(swf)\s*$/i,K,L=1,y=0,s="",r,i,h=false,B=b.extend(b("<div/>")[0],{prop:0}),M=b.browser.msie&&b.browser.version<7&&!window.XMLHttpRequest,N=function(){t.hide();v.onerror=v.onload=null;G&&G.abort();m.empty()},O=function(){if(false===e.onError(o,q,e)){t.hide();h=false}else{e.titleShow=false;e.width="auto";e.height="auto";m.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');F()}},I=function(){var a=o[q],c,g,k,C,P,w;N();e=b.extend({},b.fn.fancybox.defaults,typeof b(a).data("fancybox")=="undefined"?e:b(a).data("fancybox"));w=e.onStart(o,q,e);if(w===false){h=false}else{if(typeof w=="object"){e=b.extend(e,w)}k=e.title||(a.nodeName?b(a).attr("title"):a.title)||"";if(a.nodeName&&!e.orig){e.orig=b(a).children("img:first").length?b(a).children("img:first"):b(a)}if(k===""&&e.orig&&e.titleFromAlt){k=e.orig.attr("alt")}c=e.href||(a.nodeName?b(a).attr("href"):a.href)||null;if(/^(?:javascript)/i.test(c)||c=="#"){c=null}if(e.type){g=e.type;if(!c){c=e.content}}else{if(e.content){g="html"}else{if(c){g=c.match(J)?"image":c.match(W)?"swf":b(a).hasClass("iframe")?"iframe":c.indexOf("#")===0?"inline":"ajax"}}}if(g){if(g=="inline"){a=c.substr(c.indexOf("#"));g=b(a).length>0?"inline":"ajax"}e.type=g;e.href=c;e.title=k;if(e.autoDimensions){if(e.type=="html"||e.type=="inline"||e.type=="ajax"){e.width="auto";e.height="auto"}else{e.autoDimensions=false}}if(e.modal){e.overlayShow=true;e.hideOnOverlayClick=false;e.hideOnContentClick=false;e.enableEscapeButton=false;e.showCloseButton=false}e.padding=parseInt(e.padding,10);e.margin=parseInt(e.margin,10);m.css("padding",e.padding+e.margin);b(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){b(this).replaceWith(j.children())});switch(g){case"html":m.html(e.content);F();break;case"inline":if(b(a).parent().is("#fancybox-content")===true){h=false;break}b('<div class="fancybox-inline-tmp" />').hide().insertBefore(b(a)).bind("fancybox-cleanup",function(){b(this).replaceWith(j.children())}).bind("fancybox-cancel",function(){b(this).replaceWith(m.children())});b(a).appendTo(m);F();break;case"image":h=false;if(typeof mobile!="undefined"&&mobile===true&&typeof _PhotoSwipe!="undefined"){var items=[];$.each(o,function(i,value){items.push({url:value.href,caption:(d.titleShow)?value.title:null})});var options={getImageSource:function(obj){return obj.url},getImageCaption:function(obj){return obj.caption},preventSlideshow:!(items.length>1),previousDisabled:!(items.length>1),nextDisabled:!(items.length>1),loop:true,slideSpeed:250,nextPreviousSlideSpeed:250,enableDrag:true,swipeThreshold:50,swipeTimeThreshold:250,slideTimingFunction:"ease-out",slideshowDelay:3000,doubleTapSpeed:250,margin:20,imageScaleMethod:"fitNoUpscale",captionAndToolbarFlipPosition:true};instance=_PhotoSwipe.attach(items,options);instance.show(0);return}b.fancybox.showActivity();v=new Image;v.onerror=function(){O()};v.onload=function(){h=true;v.onerror=v.onload=null;e.width=v.width;e.height=v.height;b("<img />").attr({id:"fancybox-img",src:v.src,alt:e.title}).appendTo(m);Q()};v.src=c;break;case"swf":e.scrolling="no";C='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+e.width+'" height="'+e.height+'"><param name="movie" value="'+c+'"></param>';P="";b.each(e.swf,function(x,H){C+='<param name="'+x+'" value="'+H+'"></param>';P+=" "+x+'="'+H+'"'});C+='<embed src="'+c+'" type="application/x-shockwave-flash" width="'+e.width+'" height="'+e.height+'"'+P+"></embed></object>";m.html(C);F();break;case"ajax":h=false;b.fancybox.showActivity();e.ajax.win=e.ajax.success;G=b.ajax(b.extend({},e.ajax,{url:c,data:e.ajax.data||{},error:function(x){x.status>0&&O()},success:function(x,H,R){if((typeof R=="object"?R:G).status==200){if(typeof e.ajax.win=="function"){w=e.ajax.win(c,x,H,R);if(w===false){t.hide();return}else{if(typeof w=="string"||typeof w=="object"){x=w}}}m.html(x);F()}}}));break;case"iframe":if(typeof mobile!="undefined"&&mobile===true){window.open(e.href,"fancybox").focus();h=false;return}else{Q()}}}else{O()}}},F=function(){var a=e.width,c=e.height;a=a.toString().indexOf("%")>-1?parseInt((b(window).width()-e.margin*2)*parseFloat(a)/100,10)+"px":a=="auto"?"auto":a+"px";c=c.toString().indexOf("%")>-1?parseInt((b(window).height()-e.margin*2)*parseFloat(c)/100,10)+"px":c=="auto"?"auto":c+"px";m.wrapInner('<div style="width:'+a+";height:"+c+";overflow: "+(e.scrolling=="auto"?"auto":e.scrolling=="yes"?"scroll":"hidden")+';position:relative;"></div>');e.width=m.width();e.height=m.height();Q()},Q=function(){var a,c;t.hide();if(f.is(":visible")&&false===d.onCleanup(l,p,d)){b.event.trigger("fancybox-cancel");h=false}else{h=true;b(j.add(u)).unbind();b(window).unbind("resize.fb scroll.fb");b(document).unbind("keydown.fb");f.is(":visible")&&d.titlePosition!=="outside"&&f.css("height",f.height());l=o;p=q;d=e;if(d.overlayShow){u.css({"background-color":d.overlayColor,opacity:d.overlayOpacity,cursor:d.hideOnOverlayClick?"pointer":"auto",height:b(document).height()});if(!u.is(":visible")){M&&b("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"});u.show()}}else{u.hide()}i=X();s=d.title||"";y=0;n.empty().removeAttr("style").removeClass();if(d.titleShow!==false){if(b.isFunction(d.titleFormat)){a=d.titleFormat(s,l,p,d)}else{a=s&&s.length?d.titlePosition=="float"?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+s+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+d.titlePosition+'">'+s+"</div>":false}s=a;if(!(!s||s==="")){n.addClass("fancybox-title-"+d.titlePosition).html(s).appendTo("body").show();switch(d.titlePosition){case"inside":n.css({width:i.width-d.padding*2,marginLeft:d.padding,marginRight:d.padding});y=n.outerHeight(true);n.appendTo(D);i.height+=y;break;case"over":n.css({marginLeft:d.padding,width:i.width-d.padding*2,bottom:d.padding}).appendTo(D);break;case"float":n.css("left",parseInt((n.width()-i.width-40)/2,10)*-1).appendTo(f);break;default:n.css({width:i.width-d.padding*2,paddingLeft:d.padding,paddingRight:d.padding}).appendTo(f)}}}n.hide();if(f.is(":visible")){b(E.add(z).add(A)).hide();a=f.position();r={top:a.top,left:a.left,width:f.width(),height:f.height()};c=r.width==i.width&&r.height==i.height;j.fadeTo(d.changeFade,0.3,function(){var g=function(){j.html(m.contents()).fadeTo(d.changeFade,1,S)};b.event.trigger("fancybox-change");j.empty().removeAttr("filter").css({"border-width":d.padding,width:i.width-d.padding*2,height:e.autoDimensions?"auto":i.height-y-d.padding*2});if(c){g()}else{B.prop=0;b(B).animate({prop:1},{duration:d.changeSpeed,easing:d.easingChange,step:T,complete:g})}})}else{f.removeAttr("style");j.css("border-width",d.padding);if(d.transitionIn=="elastic"){r=V();j.html(m.contents());f.show();if(d.opacity){i.opacity=0}B.prop=0;b(B).animate({prop:1},{duration:d.speedIn,easing:d.easingIn,step:T,complete:S})}else{d.titlePosition=="inside"&&y>0&&n.show();j.css({width:i.width-d.padding*2,height:e.autoDimensions?"auto":i.height-y-d.padding*2}).html(m.contents());f.css(i).fadeIn(d.transitionIn=="none"?0:d.speedIn,S)}}}},Y=function(){if(d.enableEscapeButton||d.enableKeyboardNav){b(document).bind("keydown.fb",function(a){if(a.keyCode==27&&d.enableEscapeButton){a.preventDefault();b.fancybox.close()}else{if((a.keyCode==37||a.keyCode==39)&&d.enableKeyboardNav&&a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&a.target.tagName!=="SELECT"){a.preventDefault();b.fancybox[a.keyCode==37?"prev":"next"]()}}})}if(d.showNavArrows){if(d.cyclic&&l.length>1||p!==0){z.show()}if(d.cyclic&&l.length>1||p!=l.length-1){A.show()}}else{z.hide();A.hide()}},S=function(){if(!b.support.opacity){j.get(0).style.removeAttribute("filter");f.get(0).style.removeAttribute("filter")}e.autoDimensions&&j.css("height","auto");f.css("height","auto");s&&s.length&&n.show();d.showCloseButton&&E.show();Y();d.hideOnContentClick&&j.bind("click",b.fancybox.close);d.hideOnOverlayClick&&u.bind("click",b.fancybox.close);b(window).bind("resize.fb",b.fancybox.resize);d.centerOnScroll&&b(window).bind("scroll.fb",b.fancybox.center);if(d.type=="iframe"){b('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(b.browser.msie?'allowtransparency="true""':"")+' scrolling="'+e.scrolling+'" src="'+d.href+'"></iframe>').appendTo(j)}f.show();h=false;b.fancybox.center();d.onComplete(l,p,d);var a,c;if(l.length-1>p){a=l[p+1].href;if(typeof a!=="undefined"&&a.match(J)){c=new Image;c.src=a}}if(p>0){a=l[p-1].href;if(typeof a!=="undefined"&&a.match(J)){c=new Image;c.src=a}}},T=function(a){var c={width:parseInt(r.width+(i.width-r.width)*a,10),height:parseInt(r.height+(i.height-r.height)*a,10),top:parseInt(r.top+(i.top-r.top)*a,10),left:parseInt(r.left+(i.left-r.left)*a,10)};if(typeof i.opacity!=="undefined"){c.opacity=a<0.5?0.5:a}f.css(c);j.css({width:c.width-d.padding*2,height:c.height-y*a-d.padding*2})},U=function(){return[b(window).width()-d.margin*2,b(window).height()-d.margin*2,b(document).scrollLeft()+d.margin,b(document).scrollTop()+d.margin]},X=function(){var a=U(),c={},g=d.autoScale,k=d.padding*2;c.width=d.width.toString().indexOf("%")>-1?parseInt(a[0]*parseFloat(d.width)/100,10):d.width+k;c.height=d.height.toString().indexOf("%")>-1?parseInt(a[1]*parseFloat(d.height)/100,10):d.height+k;if(g&&(c.width>a[0]||c.height>a[1])){if(e.type=="image"||e.type=="swf"){g=d.width/d.height;if(c.width>a[0]){c.width=a[0];c.height=parseInt((c.width-k)/g+k,10)}if(c.height>a[1]){c.height=a[1];c.width=parseInt((c.height-k)*g+k,10)}}else{c.width=Math.min(c.width,a[0]);c.height=Math.min(c.height,a[1])}}c.top=parseInt(Math.max(a[3]-20,a[3]+(a[1]-c.height-40)*0.5),10);c.left=parseInt(Math.max(a[2]-20,a[2]+(a[0]-c.width-40)*0.5),10);return c},V=function(){var a=e.orig?b(e.orig):false,c={};if(a&&a.length){c=a.offset();c.top+=parseInt(a.css("paddingTop"),10)||0;c.left+=parseInt(a.css("paddingLeft"),10)||0;c.top+=parseInt(a.css("border-top-width"),10)||0;c.left+=parseInt(a.css("border-left-width"),10)||0;c.width=a.width();c.height=a.height();c={width:c.width+d.padding*2,height:c.height+d.padding*2,top:c.top-d.padding-20,left:c.left-d.padding-20}}else{a=U();c={width:d.padding*2,height:d.padding*2,top:parseInt(a[3]+a[1]*0.5,10),left:parseInt(a[2]+a[0]*0.5,10)}}return c},Z=function(){if(t.is(":visible")){b("div",t).css("top",L*-40+"px");L=(L+1)%12}else{clearInterval(K)}};b.fn.fancybox=function(a){if(!b(this).length){return this}b(this).data("fancybox",b.extend({},a,b.metadata?b(this).metadata():{})).unbind("click.fb").bind("click.fb",function(c){c.preventDefault();if(!h){h=true;b(this).blur();o=[];q=0;c=b(this).attr("rel")||"";if(!c||c==""||c==="nofollow"){o.push(this)}else{o=b("a[rel="+c+"], area[rel="+c+"]");q=o.index(this)}I()}});return this};b.fancybox=function(a,c){var g;if(!h){h=true;g=typeof c!=="undefined"?c:{};o=[];q=parseInt(g.index,10)||0;if(b.isArray(a)){for(var k=0,C=a.length;k<C;k++){if(typeof a[k]=="object"){b(a[k]).data("fancybox",b.extend({},g,a[k]))}else{a[k]=b({}).data("fancybox",b.extend({content:a[k]},g))}}o=jQuery.merge(o,a)}else{if(typeof a=="object"){b(a).data("fancybox",b.extend({},g,a))}else{a=b({}).data("fancybox",b.extend({content:a},g))}o.push(a)}if(q>o.length||q<0){q=0}I()}};b.fancybox.showActivity=function(){clearInterval(K);t.show();K=setInterval(Z,66)};b.fancybox.hideActivity=function(){t.hide()};b.fancybox.next=function(){return b.fancybox.pos(p+1)};b.fancybox.prev=function(){return b.fancybox.pos(p-1)};b.fancybox.pos=function(a){if(!h){a=parseInt(a);o=l;if(a>-1&&a<l.length){q=a;I()}else{if(d.cyclic&&l.length>1){q=a>=l.length?0:l.length-1;I()}}}};b.fancybox.cancel=function(){if(!h){h=true;b.event.trigger("fancybox-cancel");N();e.onCancel(o,q,e);h=false}};b.fancybox.close=function(){if(window.name=='fancybox'){window.self.close();}function a(){u.fadeOut("fast");n.empty().hide();f.hide();b.event.trigger("fancybox-cleanup");j.empty();d.onClosed(l,p,d);l=e=[];p=q=0;d=e={};h=false}if(!(h||f.is(":hidden"))){h=true;if(d&&false===d.onCleanup(l,p,d)){h=false}else{N();b(E.add(z).add(A)).hide();b(j.add(u)).unbind();b(window).unbind("resize.fb scroll.fb");b(document).unbind("keydown.fb");j.find("iframe").attr("src",M&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank");d.titlePosition!=="inside"&&n.empty();f.stop();if(d.transitionOut=="elastic"){r=V();var c=f.position();i={top:c.top,left:c.left,width:f.width(),height:f.height()};if(d.opacity){i.opacity=1}n.empty().hide();B.prop=1;b(B).animate({prop:0},{duration:d.speedOut,easing:d.easingOut,step:T,complete:a})}else{f.fadeOut(d.transitionOut=="none"?0:d.speedOut,a)}}}};b.fancybox.resize=function(){u.is(":visible")&&u.css("height",b(document).height());b.fancybox.center(true)};b.fancybox.center=function(a){var c,g;if(!h){g=a===true?1:0;c=U();!g&&(f.width()>c[0]||f.height()>c[1])||f.stop().animate({top:parseInt(Math.max(c[3]-20,c[3]+(c[1]-j.height()-40)*0.5-d.padding)),left:parseInt(Math.max(c[2]-20,c[2]+(c[0]-j.width()-40)*0.5-d.padding))},typeof a=="number"?a:200)}};b.fancybox.init=function(){if(!b("#fancybox-wrap").length){b("body").append(m=b('<div id="fancybox-tmp"></div>'),t=b('<div id="fancybox-loading"><div></div></div>'),u=b('<div id="fancybox-overlay"></div>'),f=b('<div id="fancybox-wrap"></div>'));D=b('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(f);D.append(j=b('<div id="fancybox-content"></div>'),E=b('<a id="fancybox-close"></a>'),n=b('<div id="fancybox-title"></div>'),z=b('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),A=b('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));E.click(b.fancybox.close);t.click(b.fancybox.cancel);z.click(function(a){a.preventDefault();b.fancybox.prev()});A.click(function(a){a.preventDefault();b.fancybox.next()});b.fn.mousewheel&&f.bind("mousewheel.fb",function(a,c){if(h){a.preventDefault()}else{if(b(a.target).get(0).clientHeight==0||b(a.target).get(0).scrollHeight===b(a.target).get(0).clientHeight){a.preventDefault();b.fancybox[c>0?"prev":"next"]()}}});b.support.opacity||f.addClass("fancybox-ie");if(M){t.addClass("fancybox-ie6");f.addClass("fancybox-ie6");b('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(D)}}};b.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.7,overlayColor:"#000",titleShow:true,titlePosition:"float",titleFormat:null,titleFromAlt:false,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};b(document).ready(function(){b.fancybox.init()})})(jQuery);
 
 var mobile = ((/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase())));
 
diff --git a/addons/jquery/jquery/update_ie6/update_ie6.js b/addons/jquery/jquery/update_ie6/update_ie6.js
index 1ae3b9b..b89c05f 100644
--- a/addons/jquery/jquery/update_ie6/update_ie6.js
+++ b/addons/jquery/jquery/update_ie6/update_ie6.js
@@ -2,92 +2,92 @@
 // inspred by SilvesterWebDesigns.com - Stuart Silvester. Thanks to the SevenUp Project.
 ;(function($){
     $.extend({ update_ie6: new function() {
-                
-            this.defaults = {                       
-                    headline: "Wissen Sie, dass Ihr Internet Explorer nicht mehr aktuell ist?",
-                    text1:    "Um unsere Webseite bestmöglich zu nutzen, empfehlen wir Ihnen Ihren Browser auf eine aktuellere Version zu aktualisieren oder einen anderen Webbrowser zu nutzen. Eine Liste der populärsten Browser finden Sie weiter unten.",
-                    text2:    "Klicken Sie auf eines der Symbole um auf die Download-Seite zu gelangen",
-                    close:    "Schließen",                  
-                    browser:  {firefox:  ['Firefox', 'http://www.mozilla.com/firefox/'],
-                                chrome:   ['Chrome', 'http://www.google.com/chrome'],
-                                safari:   ['Safari', 'http://www.apple.com/safari/'],
-                                opera:    ['Opera', 'http://www.opera.com/download/'],
-                                ie:       ['Internet Explorer 10', 'http://www.microsoft.com/windows/Internet-explorer/default.aspx']
-                              },                              
-                    template: '<div id="upie6" style="display:none">'+
-                              '<div class="upie6_headline">{HEADLINE}</div>'+
-                              '<div class="upie6_text">{TEXT1}</div>'+
-                              '<ul class="up_browser">'+
-                              '<li><a href="{FIREFOX_URL}" class="upie6_firefox" targe="_blank" title="{FIREFOX}">{FIREFOX}</a></li>'+
-                              '<li><a href="{CHROME_URL}" class="upie6_chrome" targe="_blank" title="{CHROME}">{CHROME}</a></li>'+
-                              '<li><a href="{SAFARI_URL}" class="upie6_safari" targe="_blank" title="{SAFARI}">{SAFARI}</a></li>'+
-                              '<li><a href="{OPERA_URL}" class="upie6_opera" targe="_blank" title="{OPERA}">{OPERA}</a></li>'+
-                              '<li><a href="{IE_URL}" class="upie6_ie" targe="_blank" title="{IE}">{IE}</a></li>'+
-                              '</ul>'+
-                              '<div class="upie6_text">{TEXT2}</div>'+
-                              '<a href="#" id="upie6_close" title="{CLOSE}">{CLOSE}</a>'+
-                              '</div>'
-            };
+    	    	
+	        this.defaults = { 	        			
+					headline: "Wissen Sie, dass Ihr Internet Explorer nicht mehr aktuell ist?",
+					text1:    "Um unsere Webseite bestmöglich zu nutzen, empfehlen wir Ihnen Ihren Browser auf eine aktuellere Version zu aktualisieren oder einen anderen Webbrowser zu nutzen. Eine Liste der populärsten Browser finden Sie weiter unten.",
+					text2:	  "Klicken Sie auf eines der Symbole um auf die Download-Seite zu gelangen",
+					close:    "Schließen",					
+					browser:  {firefox:  ['Firefox 7+', 'http://www.mozilla.com/firefox/'],
+								chrome:   ['Chrome 14+', 'http://www.google.com/chrome'],
+								safari:   ['Safari 5+', 'http://www.apple.com/safari/'],
+								opera: 	  ['Opera 11+', 'http://www.opera.com/download/'],
+								ie:       ['Internet Explorer 9', 'http://www.microsoft.com/windows/Internet-explorer/default.aspx']
+	        				  },	        				  
+					template: '<div id="upie6" style="display:none">'+
+							  '<div class="upie6_headline">{HEADLINE}</div>'+
+						 	  '<div class="upie6_text">{TEXT1}</div>'+
+							  '<ul class="up_browser">'+
+							  '<li><a href="{FIREFOX_URL}" class="upie6_firefox" targe="_blank" title="{FIREFOX}">{FIREFOX}</a></li>'+
+							  '<li><a href="{CHROME_URL}" class="upie6_chrome" targe="_blank" title="{CHROME}">{CHROME}</a></li>'+
+							  '<li><a href="{SAFARI_URL}" class="upie6_safari" targe="_blank" title="{SAFARI}">{SAFARI}</a></li>'+
+							  '<li><a href="{OPERA_URL}" class="upie6_opera" targe="_blank" title="{OPERA}">{OPERA}</a></li>'+
+							  '<li><a href="{IE_URL}" class="upie6_ie" targe="_blank" title="{IE}">{IE}</a></li>'+
+							  '</ul>'+
+							  '<div class="upie6_text">{TEXT2}</div>'+
+							  '<a href="#" id="upie6_close" title="{CLOSE}">{CLOSE}</a>'+
+							  '</div>'
+			};
         
-            function showDialog() {
-                
-                if (!$.browser.msie || $.browser.version > 7) {
-                    return false;
-                }               
-                if (document.cookie.length > 0) {
-                    var i = document.cookie.indexOf("upie6=");
-                    return (i != -1) ? false : true;
-                }
-                return true;
-            };
+			function showDialog() {
+				
+				if (!$.browser.msie || $.browser.version > 6) {
+					return false;
+				}				
+				if (document.cookie.length > 0) {
+					var i = document.cookie.indexOf("upie6=");
+					return (i != -1) ? false : true;
+				}
+				return true;
+			};
         
-            /* public methods */
-            this.construct = function(settings, i) {
-    
-                return this.each(function(i) {
-    
-                    var el;
-                    // store common expression for speed
-                    el = $(this);
-                    this.conf           = {};
-                    el.conf             = $.extend(this.conf, $.update_ie6.defaults, settings);
-                    
-                    if (showDialog()) {                     
-                        var html = el.conf.template;
-                        html = html.replace(/{HEADLINE}/g, el.conf.headline);
-                        html = html.replace(/{TEXT1}/g, el.conf.text1);
-                        html = html.replace(/{TEXT2}/g, el.conf.text2);                     
-                        html = html.replace(/{CLOSE}/g, el.conf.close); 
-                        html = html.replace(/{FIREFOX}/g, el.conf.browser.firefox[0]);
-                        html = html.replace(/{FIREFOX_URL}/g, el.conf.browser.firefox[1]);  
-                        html = html.replace(/{CHROME}/g, el.conf.browser.chrome[0]);
-                        html = html.replace(/{CHROME_URL}/g, el.conf.browser.chrome[1]);                            
-                        html = html.replace(/{SAFARI}/g, el.conf.browser.safari[0]);
-                        html = html.replace(/{SAFARI_URL}/g, el.conf.browser.safari[1]);                        
-                        html = html.replace(/{OPERA}/g, el.conf.browser.opera[0]);
-                        html = html.replace(/{OPERA_URL}/g, el.conf.browser.opera[1]);                          
-                        html = html.replace(/{IE}/g, el.conf.browser.ie[0]);
-                        html = html.replace(/{IE_URL}/g, el.conf.browser.ie[1]);                            
-                        
-                        $(html).prependTo("body").slideDown("fast");
-                        
-                        $("a#upie6_close")
-                            .click(function() {
-                                $("#upie6")
-                                    .slideUp("fast", function() {
-                                        $(this).remove()
-                                    });
-                                
-                                    var exp = new Date();
-                                    exp.setTime(exp.getTime() + (7 * 24 * 3600000));
-                                    document.cookie = "upie6=hide; expires="+ exp.toUTCString();
-                                });
-                    }
-                });
-            };
-        }
+	        /* public methods */
+	        this.construct = function(settings, i) {
+	
+	            return this.each(function(i) {
+	
+					var el;
+					// store common expression for speed
+	                el = $(this);
+					this.conf 			= {};
+					el.conf 			= $.extend(this.conf, $.update_ie6.defaults, settings);
+					
+					if (showDialog()) {						
+						var html = el.conf.template;
+						html = html.replace(/{HEADLINE}/g, el.conf.headline);
+						html = html.replace(/{TEXT1}/g, el.conf.text1);
+						html = html.replace(/{TEXT2}/g, el.conf.text2);						
+						html = html.replace(/{CLOSE}/g, el.conf.close);	
+						html = html.replace(/{FIREFOX}/g, el.conf.browser.firefox[0]);
+						html = html.replace(/{FIREFOX_URL}/g, el.conf.browser.firefox[1]);	
+						html = html.replace(/{CHROME}/g, el.conf.browser.chrome[0]);
+						html = html.replace(/{CHROME_URL}/g, el.conf.browser.chrome[1]);							
+						html = html.replace(/{SAFARI}/g, el.conf.browser.safari[0]);
+						html = html.replace(/{SAFARI_URL}/g, el.conf.browser.safari[1]);						
+						html = html.replace(/{OPERA}/g, el.conf.browser.opera[0]);
+						html = html.replace(/{OPERA_URL}/g, el.conf.browser.opera[1]);							
+						html = html.replace(/{IE}/g, el.conf.browser.ie[0]);
+						html = html.replace(/{IE_URL}/g, el.conf.browser.ie[1]);							
+						
+						$(html).prependTo("body").slideDown("fast");
+						
+						$("a#upie6_close")
+							.click(function() {
+								$("#upie6")
+									.slideUp("fast", function() {
+										$(this).remove()
+									});
+								
+									var exp = new Date();
+									exp.setTime(exp.getTime() + (7 * 24 * 3600000));
+									document.cookie = "upie6=hide; expires="+ exp.toUTCString();
+								});
+					}
+	            });
+	        };
+    	}
     });    
-    // extend plugin scope
+	// extend plugin scope
     $.fn.extend({ update_ie6: $.update_ie6.construct });
 })(jQuery);
 
@@ -95,47 +95,47 @@
 upie6_lang = {};
 
 if(window.CLANG !== undefined) {
-    
-    switch(CLANG[1]) {
-            
-        case 'gb':
-        case 'us':
-        case 'au':  
-        case 'ie':
-        case 'in':          
-        case 'za':  
-            upie6_lang = {  headline: "Did you know that your Internet Explorer is out of date?",
-                            text1:    "To get the best possible experience using our website we recommend that you upgrade to a newer version or other web browser. A list of the most popular web browsers can be found below.",
-                            text2:    "Just click on the icons to get to the download page.",
-                            close:    "Close"
-                            }; break;
-        case 'es':
-        case 'cl':      
-        case 'ar':          
-            upie6_lang = {  headline: "Sabía usted que su Internet Explorer está desactualizado?",
-                            text1:    "Para lograr la mejor experiencia posible usando nuestro sitio web, le recomendamos actualizar a una nueva versión de Internet Explorer o usar otro navegador web. Le entregamos una lista de los navegadores web más populares a continuación.",
-                            text2:    "Haga click en los íconos para obtener el vínculo de descarga.",
-                            close:    "Cerrar"
-                            }; break;
-        case 'fr':      
-            upie6_lang = {  headline: "Saviez-vous que votre version d'Internet Explorer est périmée?",
-                            text1:    "Pour obtenir la meilleur expérience de navigation possible sur notre site web, nous vous recommandons de mettre à jour votre navigateur ou d'en choisir un autre. Une liste des navigateurs les plus populaires se trouve ci-dessous.",
-                            text2:    "Il suffit de cliquer sur l'icône du navigateur correspondant pour se rendre à sa page de téléchargement.",
-                            close:    "Fermer"
-                            }; break;   
-        case 'it':                      
-            upie6_lang = {  headline: "Sapevi che la tua versione di Internet Explorer è obsoleta?",
-                            text1:    "Per usufruire della migliore esperienza possibile nell' utilizzare il nostro sito, ti raccomandiamo di aggiornarlo con la nuova versione o un altro browser. Una lista dei browser più popolari si trova qui sotto.",
-                            text2:    "E' sufficiente cliccare su una delle icone per andare alla pagina di download.",
-                            close:    "Chiudi"
-                            }; break;   
-        case 'pt':      
-        case 'br':          
-            upie6_lang = {  headline: "Sabia que o seu Internet Explorer está desactualizado?",
-                            text1:    "Para usufruir da melhor experiência de navegação na nossa página web recomendamos que actualize para uma nova versão ou para outro navegador web. Uma lista dos navegadores web mais populares encontra-se mais abaixo.",
-                            text2:    "Carregue nas imagens para ir à página de download",
-                            close:    "Cerrar"
-                            }; break;   
-    }
+	
+	switch(CLANG[1]) {
+			
+		case 'gb':
+		case 'us':
+		case 'au':	
+		case 'ie':
+		case 'in':			
+		case 'za':	
+			upie6_lang = {	headline: "Did you know that your Internet Explorer is out of date?",
+							text1:    "To get the best possible experience using our website we recommend that you upgrade to a newer version or other web browser. A list of the most popular web browsers can be found below.",
+							text2:	  "Just click on the icons to get to the download page.",
+							close:    "Close"
+						  	}; break;
+		case 'es':
+		case 'cl':		
+		case 'ar':			
+			upie6_lang = {	headline: "Sabía usted que su Internet Explorer está desactualizado?",
+							text1:    "Para lograr la mejor experiencia posible usando nuestro sitio web, le recomendamos actualizar a una nueva versión de Internet Explorer o usar otro navegador web. Le entregamos una lista de los navegadores web más populares a continuación.",
+							text2:	  "Haga click en los íconos para obtener el vínculo de descarga.",
+							close:    "Cerrar"
+			  				}; break;
+		case 'fr':		
+			upie6_lang = {	headline: "Saviez-vous que votre version d'Internet Explorer est périmée?",
+							text1:    "Pour obtenir la meilleur expérience de navigation possible sur notre site web, nous vous recommandons de mettre à jour votre navigateur ou d'en choisir un autre. Une liste des navigateurs les plus populaires se trouve ci-dessous.",
+							text2:	  "Il suffit de cliquer sur l'icône du navigateur correspondant pour se rendre à sa page de téléchargement.",
+							close:    "Fermer"
+							}; break;	
+		case 'it':						
+			upie6_lang = {	headline: "Sapevi che la tua versione di Internet Explorer è obsoleta?",
+							text1:    "Per usufruire della migliore esperienza possibile nell' utilizzare il nostro sito, ti raccomandiamo di aggiornarlo con la nuova versione o un altro browser. Una lista dei browser più popolari si trova qui sotto.",
+							text2:	  "E' sufficiente cliccare su una delle icone per andare alla pagina di download.",
+							close:    "Chiudi"
+					  		}; break;	
+		case 'pt':		
+		case 'br':			
+			upie6_lang = {	headline: "Sabia que o seu Internet Explorer está desactualizado?",
+							text1:    "Para usufruir da melhor experiência de navegação na nossa página web recomendamos que actualize para uma nova versão ou para outro navegador web. Uma lista dos navegadores web mais populares encontra-se mais abaixo.",
+							text2:	  "Carregue nas imagens para ir à página de download",
+							close:    "Cerrar"
+						    }; break;	
+	}
 }
 $(function () { $('body').update_ie6(upie6_lang);});
\ No newline at end of file
diff --git a/addons/modul_installer/setup/modules/6.input.php b/addons/modul_installer/setup/modules/6.input.php
index 1ab2f07..e139ca5 100644
--- a/addons/modul_installer/setup/modules/6.input.php
+++ b/addons/modul_installer/setup/modules/6.input.php
@@ -31,11 +31,11 @@ if ("CJO_LINK_ID[1]" && (
     $CJO['CUR_CLANG'] != "CJO_VALUE[3]")) {
 
     $qry = "SELECT
-                sl.id as id, 
-                sl.re_article_slice_id as re_id,
-                sl.ctype as ctype, 
-                sl.modultyp_id as modultyp_id, 
-                md.name as name
+                sl.id AS `sl.id`, 
+                sl.re_article_slice_id AS `sl.re_article_slice_id`,
+                sl.ctype AS `sl.ctype`,  
+                sl.modultyp_id AS `sl.modultyp_id`, 
+                md.name AS `md.name`
             FROM
                 ".TBL_ARTICLES_SLICE." sl
             LEFT JOIN
@@ -54,13 +54,13 @@ if ("CJO_LINK_ID[1]" && (
 
     for ($i=0;$i<$sql->getRows();$i++){
 
-        $re_id = $sql->getValue("re_id");
+        $re_id = $sql->getValue("sl.re_article_slice_id");
 
-        $results['id'][$re_id]          = $sql->getValue("id");
+        $results['id'][$re_id]          = $sql->getValue("sl.id");
         $results['re_id'][$re_id]       = $re_id;
-        $results['ctype'][$re_id]       = $sql->getValue("ctype");
-        $results['modul_id'][$re_id]    = $sql->getValue("modultyp_id");
-        $results['modul_name'][$re_id]  = $sql->getValue("modul_name");
+        $results['ctype'][$re_id]       = $sql->getValue("sl.ctype");
+        $results['modul_id'][$re_id]    = $sql->getValue("sl.modultyp_id");
+        $results['modul_name'][$re_id]  = $sql->getValue("md.name");
         $sql->next();
     }
 
@@ -112,7 +112,7 @@ else {
 ?>
 
 <div class="settings">
-    <h2 class="no_slide">[translate: step1]</h2>
+    <h2 class="no_bg_image">[translate: step1]</h2>
     <input type="hidden" name="VALUE[1]" value="<?php echo $ctype; ?>" />
     <div class="formular">
         <label>[translate: select_article]</label>
@@ -122,7 +122,7 @@ else {
         <label>[translate: label_select_language]</label>
         <?php echo $clang_sel->get(); ?>
     </div>
-    <div class="formular last">
+    <div class="formular">
         <label>[translate: select_ctype]</label>
         <?php echo $ctype_sel->get(); ?>
     </div>
@@ -131,7 +131,7 @@ else {
 <?php if("CJO_LINK_ID[1]"){?>
 
     <div class="settings" style="margin-bottom:0;">
-        <h2 class="no_slide">[translate: step2]</h2>
+        <h2 class="no_bg_image">[translate: step2]</h2>
         <?php echo $output; ?>
     </div>
 
diff --git a/addons/shop/classes/class.shop_output.inc.php b/addons/shop/classes/class.shop_output.inc.php
index 6680cab..8f0d423 100644
--- a/addons/shop/classes/class.shop_output.inc.php
+++ b/addons/shop/classes/class.shop_output.inc.php
@@ -366,13 +366,7 @@ class shopOutput {
                 break;
             case 'not_empty_strict':
                 if (empty($value)) return $message;
-                break;  
-            case 'iban':    
-                if (empty($value) || !preg_match('/DE\d{2} \d{4} \d{4} \d{4} \d{4} \d{2}$|DE\d{20}/U',$value)) return $message;
-                break;  
-            case 'bic':    
-                if (empty($value) || !preg_match('/^[A-Z]{6}[A-Z0-9]{2}([A-Z0-9]{3})?$/',$value)) return $message;
-                break; 
+                break;                
             default:
                 if (trim($value) == '') return $message;
                 break;
diff --git a/addons/shop/include/pay_methods/bank_account/de.lang b/addons/shop/include/pay_methods/bank_account/de.lang
index fa488b8..b82a8d0 100644
--- a/addons/shop/include/pay_methods/bank_account/de.lang
+++ b/addons/shop/include/pay_methods/bank_account/de.lang
@@ -2,19 +2,19 @@ shop_bank_account = Lastschrift
 
 ##./addons/shop/include/pay_methods/bank_account/class.shop_bank_account.inc.php
 shop_bank_account_costs = Gebühr
-shop_bank_account_id = IBAN
+shop_bank_account_id = Kto.-Nr.
 shop_bank_account_owner = Inhaber
-shop_bank_code = BIC
+shop_bank_code = BLZ
 shop_bank_name = Bank
 
 ##./addons/shop/include/pay_methods/bank_account/index.inc.php
 msg_no_bank_name = Bitte Namen der Bank eingeben!
 msg_no_bank_owner_name = Bitte den Kontoinhaber eingeben!
-msg_no_bank_account_number = Bitte IBAN eingeben!
-msg_no_bank_code = Bitte BIC eingeben!
+msg_no_bank_account_number = Bitte Kontonummer eingeben!
+msg_no_bank_code = Bitte Bankleitzahl eingeben!
 shop_insert_paydata = Zahlungsdaten eingeben
-shop_get_bank_account_id = IBAN
-shop_get_bank_code = BIC
+shop_get_bank_account_id = Kontonummer
+shop_get_bank_code = Bankleitzahl
 shop_get_bank_name = Kreditinstitut
 shop_bank_account_owner = Kontoinhaber
 shop_get_bank_owner_firstname = Vorname
diff --git a/addons/shop/include/pay_methods/bank_account/gb.lang b/addons/shop/include/pay_methods/bank_account/gb.lang
index ef3c17c..fd23720 100644
--- a/addons/shop/include/pay_methods/bank_account/gb.lang
+++ b/addons/shop/include/pay_methods/bank_account/gb.lang
@@ -4,17 +4,17 @@ bank_account = Debit Note
 ##./addons/shop/include/pay_methods/bank_account/index.inc.php 
 msg_no_bank_name = Specify the name of the bank please.
 msg_no_bank_owner_name = Specify the name please.
-shop_get_bank_account_id = IBAN
-shop_get_bank_code = BIC
+shop_get_bank_account_id = Account ID
+shop_get_bank_code = Bank Code
 shop_get_bank_name = Name of the Bank
 shop_get_bank_owner_firstname = Firstname 
 shop_get_bank_owner_name = Name 
 
 ##./addons/shop/include/pay_methods/bank_account/class.shop_bank_account.inc.php 
 shop_bank_account_costs = Charge
-shop_bank_account_id = IBAN
+shop_bank_account_id = Account-Id 
 shop_bank_account_owner = Bank Account Owner
-shop_bank_code = BIC 
+shop_bank_code = Bank Code 
 shop_bank_name = Name of the Bank 
 
 
diff --git a/addons/shop/include/pay_methods/bank_account/index.inc.php b/addons/shop/include/pay_methods/bank_account/index.inc.php
index 9e5f255..158c149 100644
--- a/addons/shop/include/pay_methods/bank_account/index.inc.php
+++ b/addons/shop/include/pay_methods/bank_account/index.inc.php
@@ -55,8 +55,8 @@ $elements_in['type']		= 'text';
 $elements_in['name'] 		= 'account_id';
 $elements_in['label']		= $I18N_21->msg('shop_get_bank_account_id');
 $elements_in['default']		= isset($pay_object) ? $pay_object->getAccountId() : '';
-$elements_in['validate']	= 'iban';
-$elements_in['error_msg']	= $I18N_21->msg('msg_no_bank_account_number');
+$elements_in['validate']	= 'not_empty|numeric';
+$elements_in['error_msg']	= $I18N_21->msg('msg_no_bank_account_number').'|'.$I18N_21->msg('shop_err_nums_only');
 $elements_in['required']	= 1;
 $form_elements_in[]         = $elements_in;
 
@@ -66,8 +66,8 @@ $elements_in['type']		= 'text';
 $elements_in['name'] 		= 'bank_code';
 $elements_in['label']		= $I18N_21->msg('shop_get_bank_code');
 $elements_in['default']		= isset($pay_object) ? $pay_object->getBankCode() : '';
-$elements_in['validate']	= 'bic';
-$elements_in['error_msg']	= $I18N_21->msg('msg_no_bank_code');
+$elements_in['validate']	= 'not_empty|numeric';
+$elements_in['error_msg']	= $I18N_21->msg('msg_no_bank_code').'|'.$I18N_21->msg('shop_err_nums_only');
 $elements_in['required']	= 1;
 $form_elements_in[]         = $elements_in;
 
diff --git a/addons/shop/include/pay_methods/credit_card/de.lang b/addons/shop/include/pay_methods/credit_card/de.lang
index cccda2a..b0d003e 100644
--- a/addons/shop/include/pay_methods/credit_card/de.lang
+++ b/addons/shop/include/pay_methods/credit_card/de.lang
@@ -14,7 +14,6 @@ msg_no_credit_card_number = Bitte geben Sie die Kartennummer an.
 msg_no_credit_card_owner_name = Bitte geben Sie den Namen des Karteninhabers an.
 msg_no_credit_card_provider = Bitte geben Sie das Kreditinstitut an.
 msg_no_expiration_date = Bitte wählen Sie ein Datum aus.
-shop_insert_paydata = Zahlungsdaten eingeben
 shop_err_length_eq_3 = Die CVS muss dreistellig sein.
 shop_get_credit_card_cvs = CVS-Nummer.
 shop_get_credit_card_expiration = Gültig bis
diff --git a/addons/shop/setup/install.sql b/addons/shop/setup/install.sql
index a8db4d8..2d541aa 100644
--- a/addons/shop/setup/install.sql
+++ b/addons/shop/setup/install.sql
@@ -82,7 +82,7 @@ CREATE TABLE IF NOT EXISTS `%TBL_21_ORDERS%` (
   `phone_nr` varchar(30) NOT NULL,
   `delivery_method` varchar(30) NOT NULL,
   `pay_method` varchar(30) NOT NULL,
-  `pay_data` varchar(255) NOT NULL,
+  `pay_data` varchar(50) NOT NULL,
   `pay_costs` varchar(10) NOT NULL,
   `total_price` varchar(10) NOT NULL,
   `delivery_cost` varchar(10) NOT NULL,
diff --git a/addons/xml_sitemap/classes/class.xml_sitemap.inc.php b/addons/xml_sitemap/classes/class.xml_sitemap.inc.php
index 5e8d82e..2f87611 100644
--- a/addons/xml_sitemap/classes/class.xml_sitemap.inc.php
+++ b/addons/xml_sitemap/classes/class.xml_sitemap.inc.php
@@ -65,24 +65,19 @@ class cjoXMLSitemap {
 
             foreach($articles as $article) {
                 
-                $startpage = $article->isStartPage();
-                $id = $article->getId();
-                
                 if (!OOArticle::isValid($article) || !$this->isSitemapArticle($article)) continue;
                 
-                $this->_entries[$article->getId().'_'.$clang_id] = array(
-                                          'loc'         => $article->getUrl(),
+                $this->_entries[] = array('loc'         => $article->getUrl(),
                                           'priority'    => $this->getPriority($article, $level),
                                           'changefreq'  => $this->getChangefreq($article),
                                           'lastmod'     => $article->getUpdateDate('%Y-%m-%d'),
                                           'alternate'   => $this->getAlternate($article));
                                           
-                if ($startpage && $level < $this->_config['max_level']) {
-                    $this->getEntries($id, ($level+1));
-                }              
+                if ($article->isStartPage() && $level < $this->_config['max_level']) {
+                    $this->getEntries($article->getId(), ($level+1));
+                }                      
             }
         }
-        ksort($this->_entries,SORT_NUMERIC);
     }
 
     private function getAlternate($article) {
@@ -121,18 +116,20 @@ class cjoXMLSitemap {
     private function isSitemapArticle(&$article) {
         
         if ($article->getRedirect()) {
-            $article = OOArticle::getArticleById($article->getRedirect(), $article->getCLang()); 
+            $article = OOArticle::getArticleById($article->getRedirect(), $article->getCLang());
             
-            if (!OOArticle::isValid($article) || !OOArticle::isOnline($article)) {
+            if (OOArticle::isValid($article) || !OOArticle::isOnline($article)) {
                 return false;
             }
             else {
-                cjo_Debug($article);
                 return $this->isSitemapArticle($article);
             }
         }
-             
-        return $article->hasCtypeContent() && $article->isNaviItem();
+        
+        if (!$article->hasCtypeContent()) return false;
+        if (!$article->isNaviItem()) return false;
+        
+        return true;
     }
 
     private function generateValidationContent($articles) {
@@ -187,7 +184,7 @@ class cjoXMLSitemap {
 
     private function buildEntry($entry) {
 
-        if (strpos($this->_content, $entry['loc']) === false) return '';
+       // if (strpos($this->_content, $entry['loc']) === false) return '';
 
         return sprintf("<url>\n%s%s%s%s%s</url>\n",
                 $this->buildLine('loc', $entry['loc']),
diff --git a/include/classes/cjo/class.cjo_formgenerator.inc.php b/include/classes/cjo/class.cjo_formgenerator.inc.php
index 1fd6534..ebf4aa1 100644
--- a/include/classes/cjo/class.cjo_formgenerator.inc.php
+++ b/include/classes/cjo/class.cjo_formgenerator.inc.php
@@ -366,7 +366,7 @@ class cjoFormGenerator {
                     $elements_out['element_value'][$i] = $send_value ? $send_value : $elm['default'];
                     self::getFormSelectOptions($sel, $elm['values']);
                     $sel->setSelected($elements_out['element_value'][$i]);
-                    $sel->setSelectExtra('title="'.strip_tags($elements_out['element_title'][$i]).'"');                    
+                    $sel->setSelectExtra('title="'.$elements_out['element_title'][$i].'"');                    
                     $elements_out['element_select_out'][$i] = $sel->get();
 
                     $elements_mail['element_name'][$i] 	 	 = $elm['name'];
@@ -610,13 +610,7 @@ class cjoFormGenerator {
                 break;
             case 'not_empty_strict':
                 if (empty($value)) return $message;
-                break;   
-            case 'iban':    
-                if (empty($value) || !preg_match('/DE\d{2} \d{4} \d{4} \d{4} \d{4} \d{2}$|DE\d{20}/U',$value)) return $message;
-                break;  
-            case 'bic':    
-                if (empty($value) || !preg_match('/^[A-Z]{6}[A-Z0-9]{2}([A-Z0-9]{3})?$/',$value)) return $message;
-                break;         
+                break;                
             default:
                 if (trim($value) == '') return $message;
                 break;
@@ -711,26 +705,9 @@ class cjoFormGenerator {
 			$this->mail_text .= $this->post_action['mail_body'];
      	}
      	else {
-     	    $longest = 0;
-            foreach($this->elements_mail['element_label'] as $key=>$element) {
-                $element = strip_tags($element);
-                $element = trim($element);
-                if (strlen($element) > $longest)
-                    $longest = strlen($element)+2;
-            }
      		foreach($this->elements_mail['element_label'] as $key=>$element) {
      		    if (empty($this->elements_mail['element_value'][$key])) continue;
-                
-                if ($element != '') {
-                    $element = strip_tags($element);
-                    $element = trim($element);
-                    $element = strtoupper($element);
-                    $element = $element.':';
-                    $this->mail_text .= sprintf('%-'.$longest.'s', $element);
-                }
-                else {
-                    $this->mail_text .= $element;
-                }
+                $this->mail_text .= ($element != '') ? "*".$element."*: " : "";
                 $this->mail_text .= stripslashes($this->elements_mail['element_value'][$key])." \r\n";
             }
      	}
diff --git a/include/classes/cjo/class.cjo_output.inc.php b/include/classes/cjo/class.cjo_output.inc.php
index 3e94659..ae5561f 100644
--- a/include/classes/cjo/class.cjo_output.inc.php
+++ b/include/classes/cjo/class.cjo_output.inc.php
@@ -289,11 +289,11 @@ class cjoOutput {
                                           
         $content = preg_replace("/&(?![\w|#]*?;)/", "&amp;", $content);         
         $content = preg_replace('/\[\[[^\[]+\]\]/','<!-- \0 -->', $content);
-        $content = str_replace('CJO_MEDIAFOLDER', $CJO['MEDIAFOLDER'], $content);
 
         $content = self::placeholdersToTextareas($content, $textareas);
         $content = self::placeholdersToScriptTags($content, $scripts);
 
+        $content = str_replace('CJO_MEDIAFOLDER', $CJO['MEDIAFOLDER'], $content);
         $content = str_replace('/./','/', $content);
         return $content;
     }
diff --git a/include/classes/oop/class.oocontejo.inc.php b/include/classes/oop/class.oocontejo.inc.php
index 071f181..f29b821 100644
--- a/include/classes/oop/class.oocontejo.inc.php
+++ b/include/classes/oop/class.oocontejo.inc.php
@@ -512,7 +512,7 @@ class OOContejo {
     }
 
     public function hasCtypeContent($ctype = -1) {
-        return $this->countCtypeContent($this->_id, $this->_clang, $ctype) != 0 ? true : false;
+        return $sql->countCtypeContent($this->_id, $this->_clang, $ctype) != 0 ? true : false;
     }
     
     public static function countCtypeContent($article_id, $clang, $ctype = -1) {
diff --git a/include/classes/var/class.cjo_var_article.inc.php b/include/classes/var/class.cjo_var_article.inc.php
index d3ac5a7..48ddac1 100644
--- a/include/classes/var/class.cjo_var_article.inc.php
+++ b/include/classes/var/class.cjo_var_article.inc.php
@@ -364,6 +364,7 @@ class cjoVarArticle extends cjoVars {
                         'CJO_START_ARTICLE_ID'      => $CJO['START_ARTICLE_ID'],
                         'CJO_NOTFOUND_ARTICLE_ID'   => $CJO['NOTFOUND_ARTICLE_ID'],
                         'CJO_HTDOCS_PATH'           => $CJO['HTDOCS_PATH'],
+                        'CJO_MEDIAFOLDER'           => $CJO['MEDIAFOLDER'],
                         'CJO_FRONTPAGE_PATH'        => $CJO['FRONTPAGE_PATH'],
                         'CJO_ADJUST_PATH'           => $CJO['ADJUST_PATH']);
                         
